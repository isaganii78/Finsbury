{"utilities":{},"programModules":{"MMS177":{"program":"MMS177","triggers":{"CreateNewPallet":{"name":"CreateNewPallet","method":"PACHK","advice":"PRE","active":true,"modified":1600245112323,"modifiedBy":"NJOHNSON","sourceUuid":"9f9d7074-3551-4f1e-b049-85f4aa7f26b3","programName":"MMS177","utilities":[],"type":"METHOD","priority":500}},"transactions":{},"batches":{}}},"sources":{"9f9d7074-3551-4f1e-b049-85f4aa7f26b3":{"uuid":"9f9d7074-3551-4f1e-b049-85f4aa7f26b3","updated":1648050134117,"updatedBy":"IGUANAI","created":1600244136163,"createdBy":"NJOHNSON","apiVersion":"0.2","beVersion":"16.0.0.20220118134566","codeHash":"325EA7E51699C4E603CD79224219412B69960CDF91C7403F605561DA8F41F9DB","code":"LyoqDQogKiBNTVMxNzcuQ3JlYXRlTmV3UGFsbGV0DQogKiBFeHRlbnNpb24gZm9yIE1NUzE3NyB0byB0cmlnZ2VyIEFQSSdzIHRvIHBlcmZvcm0gdGhlIHN0b2NrIG1vdmVtZW50cyBhcyBjZXJ0YWluIHNjZW5hcmlvcyBkb24ndCB3b3JrIGluIE1NUzE3Ny4NCiAqIEFsc28gd2lsbCBwb3B1bGF0ZSB0aGUgdG8gY29udGFpbmVyIG51bWJlciBpZiB0aGUgY29udGFpbmVyIG1hbmFnZW1lbnQgdHlwZSBpcyA3IGFuZCB0aGUgdG8gbG9jYXRpb24gaXMgY29udGFpbmVyIG1hbmFnZWQuDQogKiBJZiBhIG5ldyBwYWxsZXQgaXMgY3JlYXRlZCB0aGVuIGEgc2Vzc2lvbiBwYXJtIHdpbGwgYmUgc2V0IHRvIHRyaWdnZXIgYSBsYWJlbCB0byBiZSBwcmludGVkIGluIE1NUzE3Ny5QcmludExhYmVsDQogKg0KICogU2NlbmFyaW8gMSAtIEZyb20gYW5kIHRvIGxvY2F0aW9ucyBjb250YWluZXIgbWFuYWdlZCBhbmQgbm8gdHJhbnMgcXR5IGVudGVyZWQgdGhlbiB1c2UgTU1TODUwTUkvQWRkUGFja01vdmUNCiAqIFNjZW5hcmlvIDIgPSBGcm9tIGxvY2F0aW9uIGNvbnRhaW5lciBtYW5hZ2VkIGJ1dCB0byBsb2NhdGlvbiBpc3RuJ3QgdXNlIE1NUzg1ME1JL0FkZE1vdmUNCiAqDQogKiBEYXRlCSAgICBDaGFuZ2VkIEJ5ICBEZXNjcmlwdGlvbg0KICogMjAyMDEwMDEgTkpPSE5TT04gICAgQWRkIG1ldGhvZCB0byBjbGVhciBpbnB1dCBmaWVsZHMgYWZ0ZXIgY2FsbGluZyBBUEkncw0KICogMjAyMDEwMTkgTkpPSE5TT04gICAgV2hlbiBjaGVja2luZyBmb3IgcGFja2FnaW5nIGFsc28gY2hlY2sgd2l0aCBhIHF1YW50aXR5IG9mIDk5OTk5OQ0KICogMjAyMjAzMzQgSUlHVUFOQSAgICAgSW5jcmVhc2UgdGhlIHNpemUgb2YgV1dUUlFUIGZyb20gOTk5OTk5IHRvIDk5OTk5OTk5DQogKi8NCnB1YmxpYyBjbGFzcyBDcmVhdGVOZXdQYWxsZXQgZXh0ZW5kcyBFeHRlbmRNM1RyaWdnZXIgew0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIFNlc3Npb25BUEkgc2Vzc2lvbg0KICBwcml2YXRlIGZpbmFsIEludGVyYWN0aXZlQVBJIGludGVyYWN0aXZlDQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQogIHB1YmxpYyBDcmVhdGVOZXdQYWxsZXQoUHJvZ3JhbUFQSSBwcm9ncmFtLCBTZXNzaW9uQVBJIHNlc3Npb24sIEludGVyYWN0aXZlQVBJIGludGVyYWN0aXZlLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgTG9nZ2VyQVBJIGxvZ2dlcikgew0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uDQogICAgdGhpcy5pbnRlcmFjdGl2ZSA9IGludGVyYWN0aXZlDQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyDQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXINCiAgfQ0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgU3RyaW5nIHVzZXIgPSBwcm9ncmFtLmdldFVzZXIoKQ0KDQogICAgbG9ndGV4dCh1c2VyLCB0cnVlKQ0KDQogICAgLy8gR2V0IHJlcXVpcmVkIHZhbHVlcyBmcm9tIHNjcmVlbg0KICAgIFN0cmluZyBXSExPID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV1dITE8iKQ0KICAgIFN0cmluZyBJVE5PID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV0lUTk8iKQ0KICAgIFN0cmluZyBXSFNMID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV1dIU0wiKQ0KICAgIFN0cmluZyBCQU5PID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV0JBTk8iKQ0KICAgIFN0cmluZyBDQU1VID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV0NBTVUiKQ0KICAgIFN0cmluZyBUV1NMID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV1RXU0wiKQ0KICAgIFN0cmluZyBUT0NBID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV1RPQ0EiKQ0KICAgIFN0cmluZyBUUlFUID0gaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMuZ2V0KCJXV1RSUVQiKQ0KDQogICAgLy8gRGVmaW5lIHZhcmlhYmxlcw0KICAgIFN0cmluZyBDT01HID0gIiINCiAgICBTdHJpbmcgUEFDVCA9ICIiDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBJdG0gPSBudWxsDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBJdG1XaHMgPSBudWxsDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBGcm9tTG9jYXRpb24gPSBudWxsDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBUb0xvY2F0aW9uID0gbnVsbA0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gQmFsSUQgPSBudWxsDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBNb3ZlQVBJID0gbnVsbA0KDQogICAgbG9ndGV4dChUT0NBLCB0cnVlKQ0KDQogICAgSXRtID0gR2V0SXRlbShJVE5PKQ0KICAgIEl0bVdocyA9IEdldEl0bVdocyhXSExPLCBJVE5PKQ0KICAgIEZyb21Mb2NhdGlvbiA9IEdldExvY2F0aW9uKFdITE8sIFdIU0wpDQogICAgVG9Mb2NhdGlvbiA9IEdldExvY2F0aW9uKFdITE8sIFRXU0wpDQogICAgQmFsSUQgPSBHZXRCYWxhbmNlSUQoV0hMTywgSVROTywgV0hTTCwgQkFOTywgQ0FNVSkNCg0KICAgIGJvb2xlYW4gbmV3UGFsbGV0ID0gZmFsc2UNCg0KICAgIGlmIChJdG1XaHMuQ09NRyA9PSAiNyIpIHsNCiAgICAgIGlmIChUb0xvY2F0aW9uLkNNTkcgPT0gIjEiKSB7DQogICAgICAgIGlmIChUT0NBLmlzQmxhbmsoKSkgew0KICAgICAgICAgIC8vUEFDVCA9IEdldFBhY2thZ2luZyhJVE5PKSAvL0QgMjAyMDEwMTkNCiAgICAgICAgICAvL1BBQ1QgPSBHZXRQYWNrYWdpbmcoSVROTywgIjk5OTk5IikgLy9BIDIwMjAxMDE5IC8vRCBJSUdVQU5BIDIwMjIwMzIzDQogICAgICAgICAgUEFDVCA9IEdldFBhY2thZ2luZyhJVE5PLCAiOTk5OTk5OTkiKSAvL0EgMjAyMjAzMjMgSUlHVUFOQQ0KICAgICAgICAgIGxvZ3RleHQoIlBBQ1Q9ICR7UEFDVH0iLCB0cnVlKQ0KICAgICAgICAgIGlmIChQQUNULmlzRW1wdHkoKSkgeyANCiAgICAgICAgICAgIC8vUEFDVCA9IEdldFBhY2thZ2luZyhJVE5PLCAiOTk5OTk5IikgLy9BIDIwMjAxMDE5IC8vRCAyMDIyMDMyMyBJSUdVQU5BDQogICAgICAgICAgICBQQUNUID0gR2V0UGFja2FnaW5nKElUTk8sICI5OTk5OTk5OSIpIC8vQSAyMDIyMDMyMyBJSUdVQU5BDQogICAgICAgICAgICBsb2d0ZXh0KCJQQUNUPSAke1BBQ1R9IiwgdHJ1ZSkgLy9BIDIwMjAxMDE5DQogICAgICAgICAgICBpZiAoUEFDVC5pc0VtcHR5KCkpIHsgLy9BIDIwMjAxMDE5DQogICAgICAgICAgICAgIGludGVyYWN0aXZlLnNob3dDdXN0b21FcnJvcigiV1dJVE5PIiwgIk5vIHBhY2thZ2luZyByZWNvcmQgZm91bmQgZm9yIGl0ZW0gY29udGFpbmVyIGNhbm5vdCBiZSBhdXRvIGNyZWF0ZWQiKQ0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9IC8vQSAyMDIwMTAxOQ0KICAgICAgICAgIH0NCiAgICAgICAgICBUT0NBID0gR2V0Q29udGFpbmVyKFBBQ1QpDQogICAgICAgICAgbG9ndGV4dCgiVE9DQT0gJHtUT0NBfSIsIHRydWUpDQogICAgICAgICAgaWYgKCFUT0NBLmlzQmxhbmsoKSkgew0KICAgICAgICAgICAgaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMucHV0KCJXV1RPQ0EiLCBUT0NBKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBuZXdQYWxsZXQgPSB0cnVlDQogICAgICB9DQoNCiAgICAgIC8vIElmIGJvdGggZnJvbSBhbmQgdG8gbG9jYXRpb25zIGFyZSBjb250YWluZXIgbWFuYWdlZCB0aGVuIGV4ZWN1dGUgTU1TODUwTUkvQWRkUGFja01vdmUNCiAgICAgIGlmIChGcm9tTG9jYXRpb24uQ01ORyA9PSAiMSIgJiYgVG9Mb2NhdGlvbi5DTU5HID09ICIxIiAmJiBUUlFULmlzQmxhbmsoKSkgew0KICAgICAgICBNb3ZlQVBJID0gQWRkUGFja01vdmUoV0hMTywgQ0FNVSwgVFdTTCkNCiAgICAgICAgaWYgKCFNb3ZlQVBJLmNvbnRhaW5zS2V5KCdlcnJvck1zaWQnKSkgew0KICAgICAgICAgIFNldExhdGVzdE1vdmVkKFdITE8sIEl0bVdocy5XSE5NLCBJVE5PLCBJdG0uSVREUywgV0hTTCwgRnJvbUxvY2F0aW9uLlNMRFMsDQogICAgICAgICAgICBCQU5PLCBDQU1VLCBCYWxJRC5TVFFULCBJdG1XaHMuTU5VTikNCiAgICAgICAgICBpbnRlcmFjdGl2ZS5zaG93Q3VzdG9tRXJyb3IoIldXSVROTyIsICIiKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGludGVyYWN0aXZlLnNob3dDdXN0b21FcnJvcigiV1dJVE5PIiwgTW92ZUFQSS5lcnJvck1lc3NhZ2UpDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy8gSWYgZnJvbSBsb2NhdGlvbiBpcyBjb250YWluZXIgbWFuYWdlZCBidXQgdG8gbG9jYXRpb24gaXNuJ3QgdGhlbiBleGVjdXRlIE1NUzg1ME1JL0FkZE1vdmUNCiAgICAgIGlmIChGcm9tTG9jYXRpb24uQ01ORyA9PSAiMSIgJiYgVG9Mb2NhdGlvbi5DTU5HID09ICIwIikgew0KICAgICAgICBTdHJpbmcgTGF0ZXN0TW92ZWRRVFkgPSBUUlFUDQogICAgICAgIE1vdmVBUEkgPSBBZGRNb3ZlKFdITE8sIFdIU0wsIElUTk8sIEJBTk8sIENBTVUsIFRSUVQsIFRXU0wsIFRPQ0EpDQogICAgICAgIGlmICghTW92ZUFQSS5jb250YWluc0tleSgnZXJyb3JNc2lkJykpIHsNCiAgICAgICAgICBpZiAoTGF0ZXN0TW92ZWRRVFkuaXNCbGFuaygpKSB7DQogICAgICAgICAgICBMYXRlc3RNb3ZlZFFUWSA9IEJhbElELlNUUVQNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaW50ZXJhY3RpdmUuc2hvd0N1c3RvbUVycm9yKCJXV0lUTk8iLCBNb3ZlQVBJLmVycm9yTWVzc2FnZSkNCiAgICAgICAgfQ0KDQogICAgICAgIFNldExhdGVzdE1vdmVkKFdITE8sIEl0bVdocy5XSE5NLCBJVE5PLCBJdG0uSVREUywgV0hTTCwgRnJvbUxvY2F0aW9uLlNMRFMsDQogICAgICAgICAgQkFOTywgQ0FNVSwgTGF0ZXN0TW92ZWRRVFksIEl0bVdocy5NTlVOKQ0KICAgICAgICBpbnRlcmFjdGl2ZS5zaG93Q3VzdG9tRXJyb3IoIldXSVROTyIsICIiKQ0KICAgICAgfQ0KDQogICAgfQ0KICAgIHNlc3Npb24ucGFyYW1ldGVycy5wdXQoIm5ld1BhbGxldCIsIG5ld1BhbGxldCkNCiAgfQ0KDQogIC8qKg0KICAgKiBDbGVhciBpbnB1dCBmaWVsZHMgb24gZGlzcGxheQ0KICAgKiBAcGFyYW0NCiAgICogQHJldHVybg0KICAgKi8NCiAgcHVibGljIHZvaWQgQ2xlYXJJbnB1dEZpZWxkcyAoKSB7DQogICAgaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMucHV0KCJXV0NBTVUiLCAiIikNCiAgICBpbnRlcmFjdGl2ZS5kaXNwbGF5LmZpZWxkcy5wdXQoIldXVFJRTSIsICIiKQ0KICAgIGludGVyYWN0aXZlLmRpc3BsYXkuZmllbGRzLnB1dCgiV1dUUlFUIiwgIiIpDQogICAgaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMucHV0KCJXV0NBV0UiLCAiIikNCiAgICBpbnRlcmFjdGl2ZS5kaXNwbGF5LmZpZWxkcy5wdXQoIldXVFdTTCIsICIiKQ0KICAgIGludGVyYWN0aXZlLmRpc3BsYXkuZmllbGRzLnB1dCgiV1dUT0NBIiwgIiIpDQogIH0NCg0KICAvKioNCiAgICogU2V0IGxhdGVzdCBtb3ZlZCBmaWVsZHMgb24gZGlzcGxheQ0KICAgKiBAcGFyYW0gV0hMTyB3YXJlaG91c2UNCiAgICogQHBhcmFtIFdITk0gd2FyZWhvdXNlIG5hbWUNCiAgICogQHBhcmFtIElUTk8gaXRlbSBudW1iZXINCiAgICogQHBhcmFtIElURFMgbmFtZQ0KICAgKiBAcGFyYW0gV0hTTCBsb2NhdGlvbg0KICAgKiBAcGFyYW0gU0xEUyBsb2NhdGlvbiBuYW1lDQogICAqIEBwYXJhbSBCQU5PIGxvdCBudW1iZXINCiAgICogQHBhcmFtIENBTVUgY29udGFpbmVyDQogICAqIEBwYXJhbSBUUlFUIHF1YW50aXR5DQogICAqIEBwYXJhbSBNTlVOIG1haW4gdW5pdA0KICAgKiBAcmV0dXJuDQogICAqLw0KICBwdWJsaWMgdm9pZCBTZXRMYXRlc3RNb3ZlZCAoU3RyaW5nIFdITE8sIFN0cmluZyBXSE5NLCBTdHJpbmcgSVROTywgU3RyaW5nIElURFMsIFN0cmluZyBXSFNMLCBTdHJpbmcgU0xEUywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBCQU5PLCBTdHJpbmcgQ0FNVSwgU3RyaW5nIFRSUVQsIFN0cmluZyBNTlVOKSB7DQogICAgQ2xlYXJJbnB1dEZpZWxkcygpDQogICAgaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMucHV0KCJXTFdITE8iLCBXSExPKQ0KICAgIGludGVyYWN0aXZlLmRpc3BsYXkuZmllbGRzLnB1dCgiV0xXSE5NIiwgV0hOTSkNCiAgICBpbnRlcmFjdGl2ZS5kaXNwbGF5LmZpZWxkcy5wdXQoIldMSVROTyIsIElUTk8pDQogICAgaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMucHV0KCJXTElURFMiLCBJVERTKQ0KICAgIGludGVyYWN0aXZlLmRpc3BsYXkuZmllbGRzLnB1dCgiV0xXSFNMIiwgV0hTTCkNCiAgICBpbnRlcmFjdGl2ZS5kaXNwbGF5LmZpZWxkcy5wdXQoIldMU0xEUyIsIFNMRFMpDQogICAgaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMucHV0KCJXTEJBTk8iLCBCQU5PKQ0KICAgIGludGVyYWN0aXZlLmRpc3BsYXkuZmllbGRzLnB1dCgiV0xDQU1VIiwgQ0FNVSkNCiAgICBpbnRlcmFjdGl2ZS5kaXNwbGF5LmZpZWxkcy5wdXQoIldMVFJRVCIsIFRSUVQpDQogICAgaW50ZXJhY3RpdmUuZGlzcGxheS5maWVsZHMucHV0KCJXTE1OVU4iLCBNTlVOKQ0KDQogICAgUHJ0TGFiZWwoV0hMTywgSVROTywgV0hTTCwgQkFOTywgQ0FNVSkNCiAgfQ0KDQoNCiAgLyoqDQogICAqIEdldCBpdGVtDQogICAqIEBwYXJhbSBJVE5PIGl0ZW0gbnVtYmVyDQogICAqIEByZXR1cm4gcmVzdWx0IHJlc3VsdCBvZiBBUEkgY2FsbCBvdGhlcndpc2Ugd2lsbCBjb250YWluIGVycm9yDQogICAqLw0KICBwdWJsaWMgTWFwPFN0cmluZywgU3RyaW5nPiBHZXRJdGVtKFN0cmluZyBJVE5PKSB7DQogICAgZGVmIHBhcmFtZXRlcnMgPSBbIklUTk8iOklUTk9dDQogICAgbG9ndGV4dCgiR2V0SXRlbSBwYXJtcyAke3BhcmFtZXRlcnN9IiwgdHJ1ZSkNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3VsdCA9IG51bGwNCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIGxvZ3RleHQoIkdldEl0ZW0gcmVzcG9uc2UgJHtyZXNwb25zZX0iLCB0cnVlKQ0KICAgICAgcmVzdWx0ID0gcmVzcG9uc2UNCiAgICAgIHJldHVybiByZXN1bHQNCiAgICB9DQoNCiAgICBtaUNhbGxlci5jYWxsKCJNTVMyMDBNSSIsICJHZXRJdG1CYXNpYyIsIHBhcmFtZXRlcnMsIGhhbmRsZXIpDQogICAgcmV0dXJuIHJlc3VsdA0KICB9DQoNCg0KICAvKioNCiAgICogR2V0IGl0ZW0gd2FyZWhvdXNlDQogICAqIEBwYXJhbSBXSExPIHdhcmVob3VzZQ0KICAgKiBAcGFyYW0gSVROTyBpdGVtIG51bWJlcg0KICAgKiBAcmV0dXJuIHJlc3VsdCByZXN1bHQgb2YgQVBJIGNhbGwgb3RoZXJ3aXNlIHdpbGwgY29udGFpbiBlcnJvcg0KICAgKi8NCiAgcHVibGljICBNYXA8U3RyaW5nLCBTdHJpbmc+IEdldEl0bVdocyhTdHJpbmcgV0hMTywgU3RyaW5nIElUTk8pIHsNCiAgICBkZWYgcGFyYW1ldGVycyA9IFsiV0hMTyI6V0hMTywgIklUTk8iOklUTk9dDQogICAgbG9ndGV4dCgiR2V0SXRtV2hzIHBhcm1zICR7cGFyYW1ldGVyc30iLCB0cnVlKQ0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzdWx0ID0gbnVsbA0KICAgIENsb3N1cmU8Pz4gaGFuZGxlciA9IHsgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPg0KICAgICAgbG9ndGV4dCgiR2V0SXRtV2hzIHJlc3BvbnNlICR7cmVzcG9uc2V9IiwgdHJ1ZSkNCiAgICAgIHJlc3VsdCA9IHJlc3BvbnNlDQogICAgICByZXR1cm4gcmVzdWx0DQogICAgfQ0KDQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCAiR2V0SXRtV2hzQmFzaWMiLCBwYXJhbWV0ZXJzLCBoYW5kbGVyKQ0KICAgIHJldHVybiByZXN1bHQNCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgbG9jYXRpb24NCiAgICogQHBhcmFtIFdITE8gd2FyZWhvdXNlDQogICAqIEBwYXJhbSBXSFNMIGxvY2F0aW9uDQogICAqIEByZXR1cm4gcmVzdWx0IHJlc3VsdCBvZiBBUEkgY2FsbCBvdGhlcndpc2Ugd2lsbCBjb250YWluIGVycm9yDQogICAqLw0KICBwdWJsaWMgTWFwPFN0cmluZywgU3RyaW5nPiBHZXRMb2NhdGlvbihTdHJpbmcgV0hMTywgU3RyaW5nIFdIU0wpIHsNCiAgICBkZWYgcGFyYW1ldGVycyA9IFsiV0hMTyI6V0hMTywgIldIU0wiOldIU0xdDQogICAgbG9ndGV4dCgiR2V0TG9jYXRpb24gcGFybXMgJHtwYXJhbWV0ZXJzfSIsIHRydWUpDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiByZXN1bHQgPSBudWxsDQogICAgQ2xvc3VyZTw/PiBoYW5kbGVyID0geyBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+DQogICAgICBsb2d0ZXh0KCJHZXRMb2NhdGlvbiByZXNwb25zZSAke3Jlc3BvbnNlfSIsIHRydWUpDQogICAgICByZXN1bHQgPSByZXNwb25zZQ0KICAgICAgcmV0dXJuIHJlc3VsdA0KICAgIH0NCg0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAxME1JIiwgIkdldExvY2F0aW9uIiwgcGFyYW1ldGVycywgaGFuZGxlcikNCiAgICByZXR1cm4gcmVzdWx0DQogIH0NCg0KLyoqDQogKiBHZXQgYmFsYW5jZSBpZA0KICogQHBhcmFtIFdITE8gd2FyZWhvdXNlDQogKiBAcGFyYW0gSVROTyBpdGVtIG51bWJlcg0KICogQHBhcmFtIFdIU0wgbG9jYXRpb24NCiAqIEBwYXJhbSBCQU5PIGxvdCBudW1iZXINCiAqIEBwYXJhbSBDQU1VIGNvbnRhaW5lcg0KICogQHJldHVybiByZXN1bHQgcmVzdWx0IG9mIEFQSSBjYWxsIG90aGVyd2lzZSB3aWxsIGNvbnRhaW4gZXJyb3INCiAqLw0KICBwdWJsaWMgTWFwPFN0cmluZywgU3RyaW5nPiBHZXRCYWxhbmNlSUQoU3RyaW5nIFdITE8sIFN0cmluZyBJVE5PLCBTdHJpbmcgV0hTTCwgU3RyaW5nIEJBTk8sIFN0cmluZyBDQU1VKSB7DQogICAgZGVmIHBhcmFtZXRlcnMgPSBbIldITE8iOldITE8sICJJVE5PIjpJVE5PLCAiV0hTTCI6V0hTTCwgIkJBTk8iOkJBTk8sICJDQU1VIjpDQU1VXQ0KICAgIGxvZ3RleHQoIkdldEJhbGFuY2VJRCBwYXJtcyAke3BhcmFtZXRlcnN9IiwgdHJ1ZSkNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3VsdCA9IG51bGwNCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIGxvZ3RleHQoIkdldEJhbGFuY2VJRCByZXNwb25zZSAke3Jlc3BvbnNlfSIsIHRydWUpDQogICAgICByZXN1bHQgPSByZXNwb25zZQ0KICAgICAgcmV0dXJuIHJlc3VsdA0KICAgIH0NCg0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzA2ME1JIiwgIkdldCIsIHBhcmFtZXRlcnMsIGhhbmRsZXIpDQogICAgcmV0dXJuIHJlc3VsdA0KICB9DQoNCiAgLyoqDQogICAqIEdldCBwYWNrYWdpbmcNCiAgICogQHBhcmFtIElUTk8gaXRlbSBudW1iZXINCiAgICogQHJldHVybiByZXN1bHQgcmVzdWx0IG9mIEFQSSBjYWxsIG90aGVyd2lzZSB3aWxsIGNvbnRhaW4gZXJyb3INCiAgICovDQogIC8vcHVibGljIFN0cmluZyBHZXRQYWNrYWdpbmcoU3RyaW5nIElUTk8pIHsgLy9EIDIwMjAxMDE5DQogIHB1YmxpYyBTdHJpbmcgR2V0UGFja2FnaW5nKFN0cmluZyBJVE5PLCBTdHJpbmcgVFJRVCkgeyAvL0EgMjAyMDEwMTkNCiAgICAvL2RlZiBwYXJhbWV0ZXJzID0gWyJJVE5PIjpJVE5PLCAiVFJRVCI6Ijk5OTk5Il0gLy9EIDIwMjAxMDE5DQogICAgZGVmIHBhcmFtZXRlcnMgPSBbIklUTk8iOklUTk8sICJUUlFUIjpUUlFUXSAvL0EgMjAyMDEwMTkNCiAgICBsb2d0ZXh0KCJHZXRQYWNrYWdpbmcgcGFybXMgJHtwYXJhbWV0ZXJzfSIsIHRydWUpDQogICAgU3RyaW5nIHJlc3VsdCA9ICIiDQogICAgQ2xvc3VyZTw/PiBoYW5kbGVyID0geyBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+DQogICAgICBsb2d0ZXh0KCJHZXRQYWNrYWdpbmcgcmVzcG9uc2UgJHtyZXNwb25zZX0iLCB0cnVlKQ0KICAgICAgaWYgKHJlc3BvbnNlLmNvbnRhaW5zS2V5KCdlcnJvck1zaWQnKSkgew0KICAgICAgICByZXR1cm4gcmVzdWx0DQogICAgICB9DQogICAgICByZXN1bHQgPSByZXNwb25zZS5QQUNUDQogICAgfQ0KDQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMDUzTUkiLCAiR2V0SXRlbUNvbm5Qa2ciLCBwYXJhbWV0ZXJzLCBoYW5kbGVyKQ0KICAgIHJldHVybiByZXN1bHQNCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgZ2V0IGNvbnRhaW5lcg0KICAgKiBAcGFyYW0gUEFDVCBwYWNha2FnaW5nDQogICAqIEByZXR1cm4gcmVzdWx0IHJlc3VsdCBvZiBBUEkgY2FsbCBvdGhlcndpc2Ugd2lsbCBjb250YWluIGVycm9yDQogICAqLw0KICBwdWJsaWMgU3RyaW5nIEdldENvbnRhaW5lcihTdHJpbmcgUEFDVCkgew0KICAgIGRlZiBwYXJhbWV0ZXJzID0gWyJQQUNUIjpQQUNUXQ0KICAgIGxvZ3RleHQoIkdldENvbnRhaW5lciBwYXJtcyAke3BhcmFtZXRlcnN9IiwgdHJ1ZSkNCiAgICBTdHJpbmcgcmVzdWx0ID0gIiINCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIGxvZ3RleHQoIkdldENvbnRhaW5lciByZXNwb25zZSAke3Jlc3BvbnNlfSIsIHRydWUpDQogICAgICBpZiAocmVzcG9uc2UuY29udGFpbnNLZXkoJ2Vycm9yTXNpZCcpKSB7DQogICAgICAgIHJldHVybiByZXN1bHQNCiAgICAgIH0NCiAgICAgIHJlc3VsdCA9IHJlc3BvbnNlLlBBTlINCiAgICB9DQoNCiAgICBtaUNhbGxlci5jYWxsKCJNTVM0NzBNSSIsICJBZGRQYWNrU3RrIiwgcGFyYW1ldGVycywgaGFuZGxlcikNCiAgICByZXR1cm4gcmVzdWx0DQogIH0NCg0KICAvKioNCiAgICogUHJpbnQgcGFsbGV0IGxhYmVsDQogICAqIEBwYXJhbSBXSExPIHdhcmVob3VzZQ0KICAgKiBAcGFyYW0gSVROTyBpdGVtIG51bWJlcg0KICAgKiBAcGFyYW0gV0hTTCBsb2NhdGlvbg0KICAgKiBAcGFyYW0gQkFOTyBsb3QgbnVtYmVyDQogICAqIEBwYXJhbSBDQU1PIGNvbnRhaW5lcg0KICAgKiBAcmV0dXJuIHJlc3VsdCByZXN1bHQgb2YgQVBJIGNhbGwgb3RoZXJ3aXNlIHdpbGwgY29udGFpbiBlcnJvcg0KICAgKi8NCiAgcHVibGljIFN0cmluZyBQcnRMYWJlbChTdHJpbmcgV0hMTywgU3RyaW5nIElUTk8sIFN0cmluZyBXSFNMLCBTdHJpbmcgQkFOTywgU3RyaW5nIENBTVUpIHsNCiAgICBkZWYgcGFyYW1ldGVycyA9IFsiV0hMTyI6IFdITE8sICJJVE5PIjpJVE5PLCAiV0hTTCI6IFdIU0wsICJCQU5PIjogQkFOTywgIkNBTVUiOiBDQU1VXQ0KICAgIGxvZ3RleHQoIlByaW50TGFiZWwgcGFybXMgJHtwYXJhbWV0ZXJzfSIsIHRydWUpDQogICAgU3RyaW5nIHJlc3VsdCA9ICIiDQogICAgQ2xvc3VyZTw/PiBoYW5kbGVyID0geyBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+DQogICAgICBpZiAocmVzcG9uc2UuY29udGFpbnNLZXkoJ2Vycm9yTXNpZCcpKXsNCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJNTVMwNjBNSSIsICJQcnRQdXRBd2F5TGJsIiwgcGFyYW1ldGVycywgaGFuZGxlcikNCiAgICBsb2d0ZXh0KCJSZXN1bHQgb2YgUHJ0UHV0QXdheUxibDogJHtyZXN1bHR9IiwgdHJ1ZSkNCiAgICByZXR1cm4gcmVzdWx0DQogIH0NCg0KICAvKioNCiAgICogQWRkIHBhY2sgbW92ZQ0KICAgKiBAcGFyYW0gV0hMTyB3YXJlaG91c2UNCiAgICogQHBhcmFtIFBBTlIgcGFja2FnZSBudW1iZXINCiAgICogQHBhcmFtIFRXU0wgdG8gbG9jYXRpb24NCiAgICogQHJldHVybiByZXN1bHQgcmVzdWx0IG9mIEFQSSBjYWxsIG90aGVyd2lzZSB3aWxsIGNvbnRhaW4gZXJyb3INCiAgICovDQogIHB1YmxpYyBNYXA8U3RyaW5nLCBTdHJpbmc+IEFkZFBhY2tNb3ZlKFN0cmluZyBXSExPLCBTdHJpbmcgUEFOUiwgU3RyaW5nIFRXU0wpIHsNCiAgICBTdHJpbmcgUFJGTCA9ICIqRVhFIg0KICAgIFN0cmluZyBFMFBBID0gIldTIg0KICAgIFN0cmluZyBFMDY1ID0gIldNUyINCiAgICBkZWYgcGFyYW1ldGVycyA9IFsiUFJGTCI6IFBSRkwsICJFMFBBIjpFMFBBLCAiRTA2NSI6IEUwNjUsICJXSExPIjogV0hMTywgIlBBTlIiOiBQQU5SLCAiVFdTTCI6VFdTTF0NCiAgICBsb2d0ZXh0KCJBZGRQYWNrTW92ZSBwYXJtcyAke3BhcmFtZXRlcnN9IiwgdHJ1ZSkNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3VsdCA9IG51bGwNCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIHJlc3VsdCA9IHJlc3BvbnNlDQogICAgICByZXR1cm4gcmVzdWx0DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzg1ME1JIiwgIkFkZFBhY2tNb3ZlIiwgcGFyYW1ldGVycywgaGFuZGxlcikNCiAgICBsb2d0ZXh0KCJSZXN1bHQgb2YgQWRkUGFja01vdmU6ICR7cmVzdWx0fSIsIHRydWUpDQogICAgcmV0dXJuIHJlc3VsdA0KICB9DQoNCi8qKg0KICogQWRkIG1vdmUNCiAqIEBwYXJhbSBXSExPIHdhcmVob3VzZQ0KICogQHBhcmFtIFdIU0wgbG9jYXRpb24NCiAqIEBwYXJhbSBJVE5PIGl0ZW0gbnVtYmVyDQogKiBAcGFyYW0gQkFOTyBsb3QgbnVtYmVyDQogKiBAcGFyYW0gQ0FNVSBjb250YWluZXINCiAqIEBwYXJhbSBRTFFUIHF1YW50aXR5DQogKiBAcGFyYW0gVFdTTCB0byBsb2NhdGlvbg0KICogQHByYXJtIFRPQ0EgdG8gY29udGFpbmVyDQogKiBAcmV0dXJuIHJlc3VsdCByZXN1bHQgb2YgQVBJIGNhbGwgb3RoZXJ3aXNlIHdpbGwgY29udGFpbiBlcnJvcg0KICovDQogIHB1YmxpYyBNYXA8U3RyaW5nLCBTdHJpbmc+IEFkZE1vdmUoU3RyaW5nIFdITE8sIFN0cmluZyBXSFNMLCBTdHJpbmcgSVROTywgU3RyaW5nIEJBTk8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIENBTVUsIFN0cmluZyBRTFFULCBTdHJpbmcgVFdTTCwgU3RyaW5nIFRPQ0EpIHsNCiAgICBTdHJpbmcgUFJGTCA9ICIqRVhFIg0KICAgIFN0cmluZyBFMFBBID0gIldTIg0KICAgIFN0cmluZyBFMDY1ID0gIldNUyINCiAgICBkZWYgcGFyYW1ldGVycyA9IFsiUFJGTCI6IFBSRkwsICJFMFBBIjpFMFBBLCAiRTA2NSI6RTA2NSwgIldITE8iOldITE8sICJXSFNMIjpXSFNMLCAiSVROTyI6SVROTywgIkJBTk8iOkJBTk8sDQogICAgICAgICAgICAgICAgICAgICAgIkNBTVUiOkNBTVUsICJRTFFUIjpRTFFULCAiVFdTTCI6VFdTTCwgIlRPQ0EiOlRPQ0FdDQogICAgbG9ndGV4dCgiQWRkTW92ZSBwYXJtcyAke3BhcmFtZXRlcnN9IiwgdHJ1ZSkNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3VsdCA9IG51bGwNCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIHJlc3VsdCA9IHJlc3BvbnNlDQogICAgICByZXR1cm4gcmVzdWx0DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzg1ME1JIiwgIkFkZE1vdmUiLCBwYXJhbWV0ZXJzLCBoYW5kbGVyKQ0KICAgIGxvZ3RleHQoIlJlc3VsdCBvZiBBZGRNb3ZlOiAke3Jlc3VsdH0iLCB0cnVlKQ0KICAgIHJldHVybiByZXN1bHQNCiAgfQ0KDQogIGRlZiBsb2d0ZXh0KFN0cmluZyB0ZXh0LCBib29sZWFuIGxvZykgew0KDQogICAgaWYgKGxvZyA9PSBmYWxzZSkgew0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIGxvZ2dlci5kZWJ1ZygiRGVidWcgJHRleHQiKQ0KICB9DQp9DQo="}}}
